<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 4.2.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>Tag: python - Wdnmd</title>


    <meta name="description" content="哈尔滨工业大学仪器学院本科生">
<meta property="og:type" content="website">
<meta property="og:title" content="Wdnmd">
<meta property="og:url" content="https://hit-zyc.github.io/tags/python/index.html">
<meta property="og:site_name" content="Wdnmd">
<meta property="og:description" content="哈尔滨工业大学仪器学院本科生">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://hit-zyc.github.io/images/og_image.png">
<meta property="article:author" content="张砚驰">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hit-zyc.github.io/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="Wdnmd" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" rel="noopener" title="ZYC&#39;s Github" href="https://github.com/hit-zyc">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/tags">Tags</a></li>
            <li class="is-active"><a href="#" aria-current="page">python</a></li>
        </ul>
        </nav>
    </div>
</div>

    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-04-08T11:06:49.000Z">2020-04-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    23 minutes read (About 3388 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/04/08/pytorch%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3/">pytorch深入了解</a>
            
        </h1>
        <div class="content">
            <font face='Times New Roman'>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>&emsp;&emsp;经过这几天的零碎学习，我真是觉得神经网络的搭建真的太复杂了，复杂到什么程度呢？就是一个概念不懂，找到解释后，发现解释里又包含着好几个你根本不知道的概念，不过还好我做了一些学习准备，也不算是完全没有头绪。但是目前暴露的缺陷有：</p>
<ul>
<li>python高级语法知识的欠缺</li>
<li>pytorch搭建神经网络的细节问题不懂</li>
<li>对于神经网络的每一个相关细节概念的理解和了解不足</li>
</ul>
<p>&emsp;&emsp;那么针对这些，我认为可以在学习一些实例、教程时碎片化的学习来完善自己的知识框架，所以有了以下的“深入了解”学习阶段</p>
<h1 id="学习阶段————深入了解"><a href="#学习阶段————深入了解" class="headerlink" title="学习阶段————深入了解"></a>学习阶段————深入了解</h1><p>思考：</p>
<ul>
<li>神经网络的框架如何根据自己的要求、向适合解决问题的网络结构改进？</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li>学习如何使用GPU来训练模型？</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li>jupyter notebook 中如何正常运行pytorch网络？</li>
</ul>
<blockquote>
</blockquote>
<hr>
<h2 id="二、结合实例理解，弥补缺失的框架体系知识"><a href="#二、结合实例理解，弥补缺失的框架体系知识" class="headerlink" title="二、结合实例理解，弥补缺失的框架体系知识"></a>二、结合实例理解，弥补缺失的框架体系知识</h2><h3 id="1-读取文件必要的Dataset与DataLoader？"><a href="#1-读取文件必要的Dataset与DataLoader？" class="headerlink" title="1. 读取文件必要的Dataset与DataLoader？"></a>1. 读取文件必要的<code>Dataset</code>与<code>DataLoader</code>？</h3><ul>
<li>&emsp;&emsp;获取数据一直应该都是神经网络的一个要点。有些时候可以通过某些官方渠道的统一数据集来进行训练。但对于实际的项目，往往无法这样做，那么对于这一次我的大作业也就是获取图像信息来说，每一张图像的数据不一样，尺寸也都不一样，如何把这些杂乱的数据统一的放入神经网络中学习呢？在这里<code>Dataset</code>与<code>DataLoader</code>就起到了必要的作用</li>
</ul>
<ul>
<li><code>Dataset</code>与<code>DataLoader</code>分别对应数据的读取和操作，他们是官网提供给我们处理数据的一个范例。</li>
</ul>
<hr>
<h4 id="Dataset"><a href="#Dataset" class="headerlink" title="Dataset"></a><strong><code>Dataset</code></strong></h4><ul>
<li><code>Dataset</code>位于<code>torch.utils.data.Dataset</code>中，往往我们需要创建自己的获取数据集的<code>Mydataset</code>类，他必须继承官方的<code>Dataset</code>类，并且必须要实现其两个成员函数：<code>__len__()</code>、<code>__getitem__()</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">datasets</span><span class="params">(Dataset)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,data,transform = None,test = False)</span>:</span></span><br><span class="line">        imgs = []</span><br><span class="line">        labels = []</span><br><span class="line">        self.test = test</span><br><span class="line">        self.len = len(data)</span><br><span class="line">        self.data = data</span><br><span class="line">        self.transform = transform</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.data:</span><br><span class="line">            imgs.append(i[<span class="number">0</span>])</span><br><span class="line">            self.imgs = imgs</span><br><span class="line">            labels.append(int(i[<span class="number">1</span>]) ) <span class="comment">#pytorch中交叉熵需要从0开始</span></span><br><span class="line">            self.labels  = labels</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self,index)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.test:</span><br><span class="line">            filename = self.imgs[index]</span><br><span class="line">            filename = filename</span><br><span class="line">            img_path = self.imgs[index]</span><br><span class="line">            img = cv2.imread(img_path)</span><br><span class="line">            img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span><br><span class="line">            img = cv2.resize(img, (config.img_width, config.img_height))</span><br><span class="line">            img = transforms.ToTensor()(img)</span><br><span class="line">            <span class="keyword">return</span> img,filename</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            img_path = self.imgs[index]</span><br><span class="line">            label = self.labels[index]</span><br><span class="line">            <span class="comment">#label = int(label)</span></span><br><span class="line">            img = cv2.imread(img_path)</span><br><span class="line">            img = cv2.cvtColor(img,cv2.COLOR_BGR2RGB)</span><br><span class="line">            img = cv2.resize(img,(config.img_width,config.img_height))</span><br><span class="line">            <span class="comment"># img = transforms.ToTensor()(img)</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.transform <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                img = Image.fromarray(img)</span><br><span class="line">                img = self.transform(img)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                img = transforms.ToTensor()(img)</span><br><span class="line">            <span class="keyword">return</span> img,label</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.data)<span class="comment">#self.len</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在这个实例中，在初始化时需要的参数是，需要训练或者测试的数据，<code>transform</code>操作（这个具体在后面说明），至于后面的<code>test</code>参数也和transform有关</li>
</ul>
<ul>
<li><p>重点看类里内置的方法</p>
<ul>
<li><p><code>__getitem__(self,index)</code>:该方法支持从 0 到 len(self)的索引<br>&emsp;&emsp;在我们自己的Dataset中必须需要一个这个方法获取数据集中的每一组数据。比如在此例中，由于在建立dataset实例时出入的<code>data</code>数据是所有的<code>.jpg</code>文件，那么当我们需要获取图片进行训练或测试时，需要利用opencv的方法读取图片数据、将图片转换成RGB格式，把每个图片的尺寸统一为设定的模板尺寸，最后将图片信息数据转换为<code>tensor</code>张量形式</p>
</li>
<li><p><code>__len__(self)</code><br>&emsp;&emsp;这个方法比较简单，用起来也很方便。目的就是，返回数据集的长度。但这个方法必须有。</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>现存问题：在初始化时，类里面的一些赋值操作，是否存在必要性。当然，数据必须保存在数据集中，所以一个循环读取全部数据内容的操作应该要有。所以我猜测是自己如果需要用到就加，如果不会用到就不需要写在初始化方法中。 </li>
</ul>
<hr>
<h4 id="DataLoader"><a href="#DataLoader" class="headerlink" title="DataLoader"></a><strong><code>DataLoader</code></strong></h4><ul>
<li><code>torch.utils.data</code>已经提供的类：<code>Dataset</code>，但是通过这种方式只能一个个的数据的把数据全部读出来，定义了数据读取的方式，不能实现<strong>批量</strong>的把数据读取出来，为此pytorch有提供了一个方法：<code>DataLoader()</code><br>&emsp;&emsp;简单点说，就是通过<code>DataLoader</code>将<code>Dataset</code>中的数据集以每次<code>Batch_size</code>个大小的组，读取出来，以供训练</li>
</ul>
<ul>
<li><code>Dataloader</code>本质是一个可迭代对象，使用<code>iter()</code>访问，不能使用<code>next()</code>访问，由于它本身就是一个可迭代对象，可以使用<code>for inputs, labels in dataloaders</code>进行可迭代对象的访问</li>
</ul>
<ul>
<li>我们一般不需要再自己去实现<code>DataLoader</code>的方法了，只需要在构造函数中指定相应的参数即可，比如常见的<code>batch_size</code>，<code>shuffle</code>等等参数。所以使用DataLoader十分简洁方便。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#自己定义的函数：获取数据并将数据分为训练集和测试集两类</span></span><br><span class="line">test_list , train_list = get_files(config.data_folder,config.ratio)</span><br><span class="line"></span><br><span class="line"><span class="comment">#训练集 需要数据增强 transform 使用之前定义好的</span></span><br><span class="line">input_traindata = datasets(train_list,transform = transform)  </span><br><span class="line">train_loader = DataLoader(input_traindata,batch_size = config.batch_size,shuffle = <span class="literal">True</span>,collate_fn = collate_fn ,pin_memory = <span class="literal">False</span>,num_workers = <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试集 不要数据增强 transform = None</span></span><br><span class="line">input_testdata = datasets(test_list,transform = <span class="literal">None</span>)</span><br><span class="line">test_loader = DataLoader(input_testdata,batch_size = config.batch_size,shuffle = <span class="literal">False</span>,collate_fn = collate_fn,num_workers = <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>上述例子可以看到，根据自己定义的<code>dataset</code>创建了训练和测试两个实例，训练需要<strong>数据增强</strong>而测试不需要，所以两个实例除数据不同，<code>tranform</code>也不同</li>
<li><code>DataLoader</code>的参数<ul>
<li><code>X_dataset</code>：数据集的实例</li>
<li><code>batch_size</code>：训练的提取数据的单位内所含个数</li>
<li><code>shuffle</code> ：布尔值True或者是False ，表示每一个epoch之后是否对样本进行随机打乱，默认是False</li>
<li><code>collate_fn</code>：这个是一个问题，因为通常由自己确定。是一个自己对于数据选取的方法，但是我不知道他有什么意义，或者优势</li>
<li><code>pin_memory</code>：如果设置为True，那么data loader将会在返回它们之前，将tensors拷贝到CUDA中的固定内存（CUDA pinned memory）中</li>
<li><code>num_workers</code>：这个参数决定了有几个进程来处理data loading。0意味着所有的数据都会被load进主进程。（默认为0）</li>
</ul>
</li>
</ul>
<hr>
<h3 id="1-2-典型的批训练"><a href="#1-2-典型的批训练" class="headerlink" title="1.2 典型的批训练"></a>1.2 典型的批训练</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.utils.data <span class="keyword">as</span> Data</span><br><span class="line"></span><br><span class="line">torch.manual_seed(<span class="number">1</span>)    <span class="comment"># reproducible</span></span><br><span class="line"></span><br><span class="line">BATCH_SIZE = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">x = torch.linspace(<span class="number">1</span>, <span class="number">10</span>, <span class="number">10</span>)       <span class="comment"># this is x data (torch tensor)</span></span><br><span class="line">y = torch.linspace(<span class="number">10</span>, <span class="number">1</span>, <span class="number">10</span>)       <span class="comment"># this is y data (torch tensor)</span></span><br><span class="line"></span><br><span class="line">torch_dataset = Data.TensorDataset(x, y)</span><br><span class="line">loader = Data.DataLoader(</span><br><span class="line">    dataset=torch_dataset,      <span class="comment"># torch TensorDataset format</span></span><br><span class="line">    batch_size=BATCH_SIZE,      <span class="comment"># mini batch size</span></span><br><span class="line">    shuffle=<span class="literal">True</span>,               <span class="comment"># random shuffle for training</span></span><br><span class="line">    num_workers=<span class="number">2</span>,              <span class="comment"># subprocesses for loading data</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_batch</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(<span class="number">3</span>):   <span class="comment"># train entire dataset 3 times</span></span><br><span class="line">        <span class="keyword">for</span> step, (batch_x, batch_y) <span class="keyword">in</span> enumerate(loader):  <span class="comment"># for each training step</span></span><br><span class="line">            <span class="comment"># train your data...</span></span><br><span class="line"></span><br><span class="line">            print(<span class="string">'Epoch: '</span>, epoch, <span class="string">'| Step: '</span>, step, <span class="string">'| batch x: '</span>,</span><br><span class="line">                  batch_x.numpy(), <span class="string">'| batch y: '</span>, batch_y.numpy())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    show_batch()</span><br></pre></td></tr></table></figure>
<ul>
<li>不难发现，其实批训练的实现就是对<code>Dataset</code>与<code>DataLoader</code>的使用，这里很简单，只是看一个思路。</li>
<li>那么其实每一次训练的时候，对于loader实例的索引，他将带出一组<code>Batch_size</code>个数的数据，但是你的神经网络的输入层的结构不会因为<code>batch_size</code>的变化受到影响</li>
<li>批训练中<code>batch_size</code>对CNN结果的影响，<a href="https://blog.csdn.net/xuaho0907/article/details/88027224">点击这里了解</a></li>
</ul>
<hr>
<h3 id="1-3-collate-fn如何在加载数据时起作用？"><a href="#1-3-collate-fn如何在加载数据时起作用？" class="headerlink" title="1.3 collate_fn如何在加载数据时起作用？"></a>1.3 <code>collate_fn</code>如何在加载数据时起作用？</h3><ul>
<li>DataLoader能够为我们自动生成一个多线程的迭代器，只要传入几个参数进行就可以了,但是你真的懂得它是如何工作的么？</li>
</ul>
<h4 id="问题就在这个collate-fn上"><a href="#问题就在这个collate-fn上" class="headerlink" title="问题就在这个collate_fn上"></a>问题就在这个<code>collate_fn</code>上</h4><ul>
<li><code>collate_fn</code>默认是等于<code>default_collate</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span>    <span class="comment">#这是DataLoader的关于迭代的方法的源码</span></span><br><span class="line">    <span class="keyword">if</span> self.num_workers == <span class="number">0</span>:  <span class="comment"># same-process loading        </span></span><br><span class="line">        indices = next(self.sample_iter)  <span class="comment"># may raise StopIteration        </span></span><br><span class="line">        batch = self.collate_fn([self.dataset[i] <span class="keyword">for</span> i <span class="keyword">in</span> indices])  <span class="comment"># 在这里调用了collate_fn函数，传递的参数是一个列表        </span></span><br><span class="line">        <span class="keyword">if</span> self.pin_memory:            </span><br><span class="line">            batch = pin_memory_batch(batch)        </span><br><span class="line">        <span class="keyword">return</span> batch</span><br></pre></td></tr></table></figure>
<ul>
<li>那么其实<code>collate_fn</code>这个函数的输入就是一个list，list的长度是一个<code>batch size</code>，list中的每个元素都是<code>__getitem__</code>得到的结果，想要知道详解<a href="https://blog.csdn.net/qq_27825451/article/details/96130126">点击这里</a>，那么<code>batch</code>中的每一个元素其实就是<code>Dataset</code>中<code>__getitem__</code>方法得到的比如（图片信息img、标签label）</li>
</ul>
<ul>
<li><p>那么如果理解了以上的意思，再看<code>collate_fn</code>就能较快地上手了</p>
</li>
<li><p>那什么时候该使用DataLoader的<code>collate_fn</code>这个参数？<br>  &emsp;&emsp;当定义<code>DataSet</code>类中的<code>__getitem__</code>函数的时候，由于每次返回的是一组类似于<code>（x,y）</code>的样本，但是如果在返回的每一组样本x,y中出现什么错误，或者是还需要进一步对x,y进行一些处理的时候，我们就需要再定义一个collate_fn函数来实现这些功能。当然我也可以自己在实现<code>__getitem__</code>的时候就实现这些后处理也是可以的。</p>
</li>
<li><p>collate_fn，中单词<code>collate</code>的含义是：核对，校勘，对照，整理。顾名思义，这就是一个对每一组样本数据进行一遍“核对和重新整理”，现在可能更好理解一些</p>
</li>
</ul>
<hr>
<h3 id="2-1-torchvision是什么？"><a href="#2-1-torchvision是什么？" class="headerlink" title="2.1 torchvision是什么？"></a>2.1 <code>torchvision</code>是什么？</h3><ul>
<li><code>torchvision</code>是PyTorch中专门用来处理图像的库，PyTorch官网的安装教程，也会让你安装上这个包。</li>
<li>这个包中有四个大类<ul>
<li><code>torchvision.datasets</code></li>
<li><code>torchvision.models</code></li>
<li><code>torchvision.transforms</code></li>
<li><code>torchvision.utils</code></li>
</ul>
</li>
</ul>
<h4 id="torchvision-datasets"><a href="#torchvision-datasets" class="headerlink" title="torchvision.datasets"></a>torchvision.datasets</h4><ul>
<li><p><code>torchvision.datasets</code> 是用来进行数据加载的，PyTorch团队在这个包中帮我们提前处理好了很多很多图片数据集。</p>
<ul>
<li><code>MNISTCOCO</code></li>
<li><code>Captions</code></li>
<li><code>Detection</code></li>
<li><code>LSUN</code></li>
<li><code>ImageFolder</code></li>
<li><code>Imagenet-12</code></li>
<li><code>CIFAR</code></li>
<li><code>STL10</code></li>
<li><code>SVHN</code></li>
<li><code>PhotoTour</code></li>
</ul>
</li>
<li><p>我们可以直接使用，示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"></span><br><span class="line">trainset = torchvison.datasets.MNIST(</span><br><span class="line">        root = <span class="string">'./data'</span>, <span class="comment">#表示MNIST数据的加载的相对目录</span></span><br><span class="line">        train = <span class="literal">True</span>, <span class="comment">#表示是否加载数据库的训练集，false的时候加载测试集</span></span><br><span class="line">        download = <span class="literal">True</span>， <span class="comment">#表示是否自动下载MNIST数据集</span></span><br><span class="line">        transform = <span class="literal">None</span> <span class="comment">#表示是否需要对数据进行预处理，None为不进行预处理</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># 上面代码完成了MNIST数据 训练集的加载环节</span></span><br><span class="line">train_loader2 = Dateloader(</span><br><span class="line">    dataset = trainset,</span><br><span class="line">    batch_size = <span class="number">32</span>,</span><br><span class="line">    shuffle = <span class="literal">True</span></span><br><span class="line">)</span><br><span class="line">print(<span class="string">"训练集总长度为："</span>,len(trainset))</span><br><span class="line">print(<span class="string">"每个mini-batch的size为32，一共有："</span>,len(train_loader2),<span class="string">"个"</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="torchvision-models"><a href="#torchvision-models" class="headerlink" title="torchvision.models"></a><code>torchvision.models</code></h4><ul>
<li><p><code>torchvision.models</code>中为我们提供了已经训练好的模型，让我们可以加载之后，直接使用</p>
</li>
<li><p><code>torchvision.models</code>模块的子模块中包含以下模型结构。</p>
<ul>
<li><code>AlexNet</code></li>
<li><code>VGG</code></li>
<li><code>ResNet</code></li>
<li><code>SqueezeNet</code></li>
<li><code>DenseNet</code></li>
</ul>
</li>
<li><p>我们可以直接使用如下代码来快速创建一个权重随机初始化的模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torchvision.models <span class="keyword">as</span> models</span><br><span class="line"></span><br><span class="line">resnet18 = models.resnet18()</span><br><span class="line">alexnet = models.alexnet()</span><br><span class="line">squeezenet = models.squeezenet1_0()</span><br><span class="line">densenet = models.densenet_161()</span><br></pre></td></tr></table></figure></li>
<li><p>也可以通过使用<code>pretrained=True</code>来加载一个别人预训练好的模型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torchvision.models <span class="keyword">as</span> models</span><br><span class="line"></span><br><span class="line">resnet18 = models.resnet18(pretrained=<span class="literal">True</span>)</span><br><span class="line">alexnet = models.alexnet(pretrained=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="torchvision-transforms"><a href="#torchvision-transforms" class="headerlink" title="torchvision.transforms"></a><code>torchvision.transforms</code></h4><ul>
<li><p><code>transforms</code>提供了一般的图像转换操作类，这就是我在一开始<code>Dataset</code>中提到了<code>transform</code>，还记得么？哈哈，可以翻一翻上面的例程中在创建<code>Mydataset</code>类的<code>getitem</code>方法中是如何使用transforms的</p>
</li>
<li><p>其实我猜测例程中，作者想在获取每一个图像信息时，除了进行<code>opencv</code>的操作外，训练时还要对图像数据信息做更多处理，而测试时当然就不需要这种处理</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们这里还是对MNIST进行处理，初始的MNIST是 28 * 28，我们把它处理成 96 * 96 的torch.Tensor的格式</span></span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图像预处理步骤</span></span><br><span class="line">transform = transforms.Compose([</span><br><span class="line">    transforms.Resize(<span class="number">96</span>), <span class="comment"># 缩放到 96 * 96 大小</span></span><br><span class="line">    transforms.ToTensor(),</span><br><span class="line">    transforms.Normalize((<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>), (<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>)) <span class="comment"># 归一化</span></span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">DOWNLOAD = <span class="literal">True</span></span><br><span class="line">BATCH_SIZE = <span class="number">32</span></span><br><span class="line"></span><br><span class="line">train_dataset = torchvision.datasets.MNIST(root=<span class="string">'./data/'</span>, train=<span class="literal">True</span>, transform=transform, download=DOWNLOAD)</span><br><span class="line">train_loader = DataLoader(dataset=train_dataset,</span><br><span class="line">                          batch_size=BATCH_SIZE,</span><br><span class="line">                          shuffle=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">print(len(train_dataset))</span><br><span class="line">print(len(train_loader))</span><br></pre></td></tr></table></figure>

<ul>
<li>例程中是将从<code>torchvision.datasets</code>中获取的图像数据做transform，这样更简单，那如何在自己定义的Dataset类中加入Transform呢？<ul>
<li>第一步：定义自己的<code>DataSet</code>，并重写<code>__getitem__</code>，在里面实现关键的<code>transform</code>操作</li>
<li>第二步：将多个数据增强方式组合起来合成一个<code>transforms</code>，通过<code>Compose</code>类来实现，注意这个类的返回值哦！</li>
<li>第三步：构造<code>DataSet</code>的对象，将组合起来的<code>transform</code>传递进去，这样就会对每一个<code>batch_size</code>的图像都进行相关的数据增强操作了</li>
</ul>
</li>
<li>细节问题在于，我没太搞懂这种的数据类型的转换，一会是图片类型，一会是<code>numpy</code>矩阵类型，最后又要转换成<code>tensor</code>张量类型，这个要之后细究</li>
</ul>
<hr>
<h3 id="3-1-什么是Resnet？"><a href="#3-1-什么是Resnet？" class="headerlink" title="3.1 什么是Resnet？"></a>3.1 什么是<code>Resnet</code>？</h3><p>👴也不知道，👴正在学</p>
</font>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-04-07T05:46:09.000Z">2020-04-07</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 637 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/04/07/pytorch%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/">pytorch使用说明</a>
            
        </h1>
        <div class="content">
            <font face='Times New Roman'>

<h4 id="torch-normal-means-std-out-None"><a href="#torch-normal-means-std-out-None" class="headerlink" title="torch.normal(means, std, out=None)"></a><code>torch.normal(means, std, out=None)</code></h4><ul>
<li>返回满足正态分布的张量</li>
<li><code>means</code>和<code>std</code>分别给出均值和标准差</li>
</ul>
<hr>
<h4 id="torch-rand-sizes-out-None-→-Tensor"><a href="#torch-rand-sizes-out-None-→-Tensor" class="headerlink" title="torch.rand(*sizes, out=None) → Tensor"></a><code>torch.rand(*sizes, out=None) → Tensor</code></h4><ul>
<li><strong>均匀分布</strong>：返回一个张量，包含了从区间[0, 1)的均匀分布中抽取的一组随机数。张量的形状由参数sizes定义</li>
</ul>
<hr>
<h4 id="torch-randn-sizes-out-None-→-Tensor"><a href="#torch-randn-sizes-out-None-→-Tensor" class="headerlink" title="torch.randn(*sizes, out=None) → Tensor"></a><code>torch.randn(*sizes, out=None) → Tensor</code></h4><ul>
<li><strong>标准正态分布</strong>：返回一个张量，包含了从标准正态分布（均值为0，方差为1，即高斯白噪声）中抽取的一组随机数。张量的形状由参数sizes定义</li>
</ul>
<hr>
<h4 id="torch-squeeze-a-N"><a href="#torch-squeeze-a-N" class="headerlink" title="torch.squeeze(a,N)"></a><code>torch.squeeze(a,N)</code></h4><ul>
<li>对数据的维度进行压缩，去掉指定个维数为1的维度，注意：如果不加第二个参数’N’，就是去掉<strong>所有</strong>维数为1的维度</li>
<li>另一种形式，<code>a.squeeze(N)</code> 也是去掉a中指定的维数为一的维度，去掉的维度数为N</li>
</ul>
<hr>
<h4 id="torch-unsqueeze"><a href="#torch-unsqueeze" class="headerlink" title="torch.unsqueeze()"></a><code>torch.unsqueeze()</code></h4><ul>
<li>对数据维度进行扩充。给指定位置加上维数为1的维度,同样有另外一种形式<code>a.squeeze(N)</code></li>
<li><strong>注意！</strong>当对神经网络的输入层的特征数据提前处理时，可能需要使用该函数，因为输入数据必须是一个至少二维的张量</li>
</ul>
<hr>
<blockquote>
<p>可以关注一下python自带的<code>numpy</code>数字计算库和<code>torch</code>的数据处理，其实相似度很高</p>
</blockquote>
<hr>
<h4 id="torch-cat-A-B-0"><a href="#torch-cat-A-B-0" class="headerlink" title="torch.cat((A,B),0)"></a><code>torch.cat((A,B),0)</code></h4><ul>
<li>将两个张量（tensor）拼接在一起，第一个参数是两个张量组成的元组，第二个参数是行拼接(1)或者列拼接(0)</li>
<li><a href="https://blog.csdn.net/qq_39709535/article/details/80803003">实例</a></li>
</ul>
<h4 id="np-hstack-A-B-C-amp-np-vstack-A-B-C"><a href="#np-hstack-A-B-C-amp-np-vstack-A-B-C" class="headerlink" title="np.hstack((A,B,C..)) &amp; np.vstack((A,B,C..))"></a><code>np.hstack((A,B,C..))</code> &amp; <code>np.vstack((A,B,C..))</code></h4><ul>
<li>将参数元组的元素数组按<strong>水平/垂直</strong>方向进行叠加，可以和上面的torch.cat比较一下</li>
</ul>
<h4 id="torch-stack-tensor1-tensor2-tensor3…-dim-0"><a href="#torch-stack-tensor1-tensor2-tensor3…-dim-0" class="headerlink" title="torch.stack([tensor1, tensor2, tensor3…], dim=0)"></a><code>torch.stack([tensor1, tensor2, tensor3…], dim=0)</code></h4><ul>
<li>将几个矩阵按照dim指定维度堆叠在一起</li>
<li><a href="https://blog.csdn.net/orangerfun/article/details/103931343">实例</a></li>
</ul>
<hr>
<h4 id="np-random-shuffle-x"><a href="#np-random-shuffle-x" class="headerlink" title="np.random.shuffle(x)"></a><code>np.random.shuffle(x)</code></h4><ul>
<li>现场修改序列，改变自身内容。（类似洗牌，打乱顺序）</li>
<li>对多维数组进行打乱排列时，默认是对第一个维度也就是<strong>列维度进行随机打乱</strong></li>
</ul>
<hr>
<h4 id="np-transpose-x"><a href="#np-transpose-x" class="headerlink" title="np.transpose(x)"></a><code>np.transpose(x)</code></h4><ul>
<li>常用于二维数组的<strong>转置</strong></li>
</ul>
<hr>
<h4 id="torch-div-input-value-out-None"><a href="#torch-div-input-value-out-None" class="headerlink" title="torch.div(input, value, out=None)"></a><code>torch.div(input, value, out=None)</code></h4><ul>
<li>将input逐元素除以标量值value，并返回结果到输出张量out。</li>
</ul>
<hr>
<h4 id="plt-scatter-x-y-c-39-r-39-s-20-marker-quot-quot-lw-2"><a href="#plt-scatter-x-y-c-39-r-39-s-20-marker-quot-quot-lw-2" class="headerlink" title="plt.scatter(x,y,c=&#39;r&#39;,s=20,marker=&quot;.&quot;,lw=2)"></a><code>plt.scatter(x,y,c=&#39;r&#39;,s=20,marker=&quot;.&quot;,lw=2)</code></h4><ul>
<li><code>matplotlib</code>库中画散点图的函数，注意<code>c</code>这个参数的特别用法</li>
<li><a href="https://blog.csdn.net/qiu931110/article/details/68130199/">详解</a></li>
</ul>
</font>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-04-03T06:19:15.000Z">2020-04-03</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    15 minutes read (About 2279 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/04/03/pytorch%E5%88%9D%E8%AF%86/">pytorch、jupyter初识</a>
            
        </h1>
        <div class="content">
            <font face='Times New Roman'>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>&emsp;&emsp;如何逐渐掌握深度学习呢，是一个难题，网上参差不齐没有一个非常好非常全面的教程，只能一点一点自己累计，寻找例程来模仿主要理解他是怎么一步步完成任务的、思考一个普遍性的解决问题的过程，如何搭建深度学习的神经网络框架，现在暂时选择<code>pytorch</code>。<br>&emsp;&emsp;然后，目前推荐搭建框架过程使用<code>jupyter notebook</code>，所以也要学习如何使用它，那么我想在每一阶段都解决和思考一些问题记录下来，来一步步稳扎稳打的学习深度学习</p>
<h3 id="个人思路"><a href="#个人思路" class="headerlink" title="个人思路"></a>个人思路</h3><p>&emsp;&emsp;其实，深度学习说难不难，说简单肯定不简单，你真的可以甚至1天快速入门、上手，只要你懂一些python语法，稍微看看比较通俗的神经网络的介绍文章，学一种搭建框架的方式就能让你用上你设计的网络结构，大批量的规则化的图像信息甚至也可以从网上获取，然后非常方便的使用、训练、测试。<br>&emsp;&emsp;但是你想真正用神经网络来解决问题你自己的实际问题，那么这些将远远不够，至少我是这样认为的，所以我寻找了很多比较有顺序的深度学习教程（pytorch的），都需要一篇篇的仔细阅读，深化概念，让之后的进阶操作能更快理解。</p>
<hr>
<h1 id="学习阶段————初次接触"><a href="#学习阶段————初次接触" class="headerlink" title="学习阶段————初次接触"></a>学习阶段————初次接触</h1><p>思考：</p>
<ul>
<li>如何将一大批尺寸不一、随机的图像统一标准化的作为深度学习的输入、以及同时集合这些输入的label–对应的解，即真实值（来和输出层的计算值比较损失）？</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li>神经网络的框架如何根据自己的要求、向适合解决问题的网络结构改进？</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li>学习如何使用GPU来训练模型？</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li>jupyter notebook 中如何正常运行pytorch网络？</li>
</ul>
<blockquote>
</blockquote>
<hr>
<h2 id="一、在Morvan莫烦的pytorch教程中，再次理解神经网络"><a href="#一、在Morvan莫烦的pytorch教程中，再次理解神经网络" class="headerlink" title="一、在Morvan莫烦的pytorch教程中，再次理解神经网络"></a>一、在Morvan莫烦的pytorch教程中，再次理解神经网络</h2><h3 id="1-1-神经网络是什么"><a href="#1-1-神经网络是什么" class="headerlink" title="1.1 神经网络是什么"></a>1.1 神经网络是什么</h3><ul>
<li>之前虽然理解了一种说法，好像没提出来，这里讲一讲，但不讲太多，没啥意义</li>
<li>首先，人们希望模仿人类的大脑，即生物神经网络，人类如何形成条件反射？如何学习？如何记忆？大脑内神经元如何工作？神经元之间有什么样的联系？</li>
<li>人工神经网络相比，相似，又不相似，所有神经元的连接在同一时间都是固定的，不会凭空产生新联结，它是一种逐次接近正确答案的训练手段，其中“误差反向传递”起到关键作用</li>
</ul>
<h3 id="1-2-神经网络的简单结构概念"><a href="#1-2-神经网络的简单结构概念" class="headerlink" title="1.2 神经网络的简单结构概念"></a>1.2 神经网络的简单结构概念</h3><ul>
<li><code>Gradient Descent</code>：梯度下降&emsp;&emsp;&emsp;&emsp;<code>Cost Function</code>：损失函数</li>
<li><strong>输入层、隐含层（第1层。。。第n层）、输出层</strong>就对应着<strong>特征–&gt;代表特征1–&gt;…–&gt;代表特征n–&gt;输出</strong>，这些代表特征是越来越抽象的，人越来越无法理解，但计算机就对他比较敏感了</li>
<li><strong>迁移学习</strong>：即在当你现有的一般神经网络足够处理比如图片内容种类识别、字符识别的任务后。如果我们在输出层前再加入几层神经网络来训练，就能来完成进阶的任务，比如不仅识别数字，还能知道数字的书写字体。。等等</li>
</ul>
<h3 id="2-1-选择Pytorch"><a href="#2-1-选择Pytorch" class="headerlink" title="2.1 选择Pytorch"></a>2.1 选择<code>Pytorch</code></h3><ul>
<li>好用、使用广泛、新颖、直观、动态建立框架</li>
<li><strong><code>torchvision</code></strong>里已经有一些它搭建好的网络，比如resnet（可以可以，我知道例程是这样用的了），然后你用这个已有的网络来训练自己的任务</li>
</ul>
<blockquote>
<p>将<code>jupyter notebook</code>工作目录更改为自定义，即在属性栏启动目录将<code>userprofile/</code>..双引号内的内容改为自己希望前往的目录地址，重启即可</p>
</blockquote>
<ul>
<li><a href="http://pytorch.org/docs/torch.html#math-operations">pytorch常用函数的详解</a>&emsp;&emsp;&emsp;&emsp;<a href="https://www.bilibili.com/video/BV1Vx411j7kT?p=7">numpy矩阵类型与pytorch中tensor（张量）矩阵转换</a></li>
</ul>
<h3 id="2-2-什么是Variable"><a href="#2-2-什么是Variable" class="headerlink" title="2.2 什么是Variable"></a>2.2 什么是<code>Variable</code></h3><ul>
<li><p>&emsp;&emsp;它在神经网络的训练中是一个关键，为什么这么说？思考一下，神经网络的反向传播算法常用梯度下降法，那其中如何求梯度呢？<br>&emsp;&emsp;大家都知道就是求偏导数，导数就是梯度，torch里求导数的小帮手就是<code>variable</code>，将tensor张量放进variable中，开启自动求梯度的配置</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">variable = Variable(tensor,requires_grad=<span class="literal">True</span>) <span class="comment">#requires_grad = True</span></span><br></pre></td></tr></table></figure>
<p>那么，你以后含variable的运算就都和variable本身建立了某种联系，可以快速得到以后的结果相对variable的梯度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v_out = torch.mean(variable*variable)  <span class="comment">#例如求个平均数的运算</span></span><br><span class="line">v_out.backward()  <span class="comment">#求梯度</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>variable</code>变量不同于<code>tensor</code>，但是<code>variable.data</code>可以得到tensor，如果想进行tensor和numpy_array的转换，那么就要<code>xx.data</code>先得到tensor</p>
</li>
<li><p><code>variable</code>的运算和<code>tensor</code>相似，但不完全相同</p>
</li>
</ul>
<h3 id="2-3-激励函数-AF–activation-function-？"><a href="#2-3-激励函数-AF–activation-function-？" class="headerlink" title="2.3 激励函数(AF–activation function)？"></a>2.3 激励函数(AF–activation function)？</h3><ul>
<li>&emsp;&emsp;激励函数广泛应用在各种层，各种用，可是为什么要激励函数呢？因为复杂问题中，输入输出往往都<strong>不是线性关系</strong>，不是线性，你就不能简单在他们中间乘个系数。<br>&emsp;&emsp;进阶的操作就是，在输入做完简单线性处理（乘k）的结果代入一个非线性函数</li>
</ul>
<ul>
<li>&emsp;&emsp;常用的非线性激活函数由<code>relu</code>、<code>sigmoid</code>、<code>tanh</code>方程，甚至可以自己创造激励函数来求解，不过要注意，这些激励函数必须都是<strong>可以微分的</strong>，因为需要求梯度求导</li>
</ul>
<ul>
<li>&emsp;&emsp;当隐藏层不多时，可以尝试任意一个激励函数；不过当隐藏层中含有非常多个<code>layer</code>，就有慎重选择，可能出现<em>梯度爆炸</em>、<em>梯度消失</em>（我也不太懂，再学学）。其次，具体案例中，少量隐藏层可以有多种选择，<strong>卷积神经网络</strong>首选<code>relu</code>，<strong>循环神经网络</strong>首选<code>relu</code>、<code>tanh</code></li>
</ul>
<h4 id="如何应用activation-function"><a href="#如何应用activation-function" class="headerlink" title="如何应用activation function"></a><strong>如何应用activation function</strong></h4><ul>
<li>理解代码然后实验即可<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Variable</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># fake data</span></span><br><span class="line"></span><br><span class="line">x = torch.linspace(<span class="number">-5</span>, <span class="number">5</span>, <span class="number">200</span>)  <span class="comment"># x data (tensor), shape=(100, 1)</span></span><br><span class="line">x = Variable(x)</span><br><span class="line">x_np = x.data.numpy()   <span class="comment"># numpy array for plotting</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># following are popular activation functions</span></span><br><span class="line"></span><br><span class="line">y_relu = torch.relu(x).data.numpy()</span><br><span class="line">y_sigmoid = torch.sigmoid(x).data.numpy()</span><br><span class="line">y_tanh = torch.tanh(x).data.numpy()</span><br><span class="line">y_softplus = F.softplus(x).data.numpy() <span class="comment"># there's no softplus in torch</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="3-1-构建网络：回归"><a href="#3-1-构建网络：回归" class="headerlink" title="3.1 构建网络：回归"></a>3.1 构建网络：回归</h3><ul>
<li><p>利用<code>Pytorch</code>建立一个简单的神经网络</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Net</span><span class="params">(torch.nn.Module)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, xxx, xxx, xxx, ...)</span>:</span></span><br><span class="line">        super(Net, self).__init__()</span><br><span class="line">        <span class="comment"># xxxxxxxx</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        <span class="comment"># xxxxxxxx</span></span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure></li>
<li><p>定义一个实际的神经网络</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net = Net(xxx=<span class="number">1</span>, xxx=<span class="number">10</span>, xxx=<span class="number">1</span>, ...)</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义优化器<code>optimizer</code>和损失函数<code>loss function</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">optimizer = torch.optim.SGD(net.parameters(), lr=<span class="number">0.2</span>)  <span class="comment">#net.parameters()：包含了神经网络的所有参数  lr：学习率（步长）</span></span><br><span class="line">loss_func = torch.nn.MSELoss()  <span class="comment"># this is for regression mean squared loss</span></span><br></pre></td></tr></table></figure></li>
<li><p>那么在训练的时候</p>
<ul>
<li>首先定义网络的输出位置<code>prediction</code>，真正计算损失<code>loss</code></li>
<li>每次利用优化器清除掉网络中之前计算的梯度</li>
<li>然后开始运行反向传播算法</li>
<li>最后向正确方向迈出一步，用计算出的梯度再计算出新一轮的网络参数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">prediction = net(x)     <span class="comment"># input x and predict based on x</span></span><br><span class="line">loss = loss_func(prediction, y)     <span class="comment"># must be (1. nn output, 2. target)</span></span><br><span class="line">optimizer.zero_grad()   <span class="comment"># clear gradients for next train</span></span><br><span class="line">loss.backward()         <span class="comment"># backpropagation, compute gradients</span></span><br><span class="line">optimizer.step()        <span class="comment"># apply gradients</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>当然本节是对于简单的回归问题，所以定义输出量的变量简单，损失计算也是简单的均方差算法</p>
</blockquote>
</li>
</ul>
<h3 id="3-2-构建网络：分类"><a href="#3-2-构建网络：分类" class="headerlink" title="3.2 构建网络：分类"></a>3.2 构建网络：分类</h3><ul>
<li>与简单的回归神经网络不同的是，分类神经网络的输入量和输出量都不只有一个</li>
<li>输入量可以是一组坐标，甚至可以是一张图片的一个三维张量，而输出则可以是一个输入张量对所有类别的概率判断</li>
<li>分类的损失函数选择和回归是不一样的，教程中选择了<code>loss_func = torch.nn.CrossEntropyLoss()</code></li>
<li>当然，对于我要解决的字符识别问题而言，输入就要复杂得多，远不是一对坐标那么简单，输出的类别也会有很多，所以更透彻的学习将在第二阶段进行</li>
</ul>
</font>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-04-03T05:06:41.000Z">2020-04-03</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    17 minutes read (About 2488 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/04/03/opencv-4/">python 之 opencv 阶段总结篇</a>
            
        </h1>
        <div class="content">
            <font face='Times New Roman'>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul>
<li>没想到吧，这就总结了。没错我学习的三分钟热度真的太强了，这几天作业都没好好做，全在看这一套opencv的教程。那么就在大概第四天的时候把这一套教程给全部实验了一遍。</li>
<li>不管怎么说，这一套教程呢，我作为小白学者觉得非常不错，讲的不深也有一些小挑战（略微简单，不过需要细品）。其实可以通过这些知识和技巧来做自己的延申，我还没有多尝试，唯一一次尝试使用对比字母轮廓形状的方法找到正确的字母，用他给的‘A’成功了，自己在网上找了个‘C’，预处理还做了闭运算轮廓只有一条，结果算法结果是像A我真的吐了。</li>
<li>那么鉴于我一下子就学完了，而且每一章都像之前那样复制性的总结其实没多大意义，教程我电脑里也有，想复习了再去看看就可，所以这次来一个总结，目的就是略微的提到写我觉得的重点。</li>
</ul>
<h1 id="知识点回忆"><a href="#知识点回忆" class="headerlink" title="知识点回忆"></a>知识点回忆</h1><hr>
<p><a href="#1">1. 摄像头 or 视频</a><br><a href="#2">2. matplotlib的使用</a><br><a href="#3">3. 图像基本操作</a><br><a href="#4">4. 颜色空间转换</a><br><a href="#5">5. 阈值分割</a><br><a href="#6">6. 图形几何变换</a><br><a href="#7">7. 绘图功能</a><br><a href="#8">8. 图像混合</a></p>
<hr>
<h3 id="1">1. 摄像头 or 视频</h3>


<ul>
<li>我看了下，之前讲完了前三个部分，调用电脑摄像头，可以用来截取一帧图像、可以将摄像头的连续若干帧图像保存成视频的形式</li>
</ul>
<ul>
<li>可以打开一个视频，如果你利用cv2来<strong>创建一个滑动条</strong><code>cv2.createTrackbar()</code>（滑动就会对应有回调函数）还能<strong>实现拖动视频播放进度</strong>，借助<code>cv2.setTrackbarPos()</code>、<code>cv2.getTrackbarPos()</code>其实看函数名也知道是干什么的，这里不多讲了  </li>
</ul>
<ul>
<li><code>cv2.VideoCapture()</code>可以<strong>打开摄像头或者视频文件</strong>，<code>cap.get(propId)</code>、<code>cap.set(propId,value)</code>来<strong>得到和修改摄像头的很多属性</strong></li>
</ul>
<ul>
<li><p><code>cv2.imwrite()</code>来<strong>保存图片或者视频</strong>，保存视频的时候要注意提前设置好视频编码方式，我看有挺多的可能根据需要到时候就会了解吧、当然<strong>读取图片</strong>还是得<code>cv2.imread()</code></p>
</li>
<li><p>捕获视频中的一帧<code>ret, frame = capture.read()</code></p>
</li>
</ul>
<hr>
<h3 id="2">2. matplotlib的使用</h3>  


<ul>
<li>其实这整套教程也没咋用到，他和matlab里的plot用法有点像，都是subplot。不过要注意，他来显示图像时，<code>plt.imshow()</code>中后一个参数cmap的参数选择，灰度图就是<code>cmap = &#39;gray&#39;</code>，而且imshow之后必须要加<code>plt.show()</code>，要不然图片就不显示，可以看一下老师怎么写的</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">titles &#x3D; [&#39;Original&#39;, &#39;BINARY&#39;, &#39;BINARY_INV&#39;, &#39;TRUNC&#39;, &#39;TOZERO&#39;, &#39;TOZERO_INV&#39;]</span><br><span class="line">images &#x3D; [img, th1, th2, th3, th4, th5]</span><br><span class="line"></span><br><span class="line"># 使用Matplotlib显示</span><br><span class="line">for i in range(6):</span><br><span class="line">    plt.subplot(2, 3, i + 1)</span><br><span class="line">    plt.imshow(images[i], &#39;gray&#39;)</span><br><span class="line">    plt.title(titles[i], fontsize&#x3D;8)</span><br><span class="line">    plt.xticks([]), plt.yticks([])  # 隐藏坐标轴</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<ul>
<li>matplotlib中图像显示RGB顺序，opencv是BGR，显示时需要通道<strong>倒置</strong>一下</li>
</ul>
<hr>
<h3 id="3">3. 图像基本操作</h3>

<ul>
<li>读取像素点的值直接<code>img[100, 90]</code>，修改也是这样。</li>
</ul>
<ul>
<li><code>img.shape</code>形状中包括行数、列数和通道数</li>
</ul>
<ul>
<li><strong>截取ROI</strong>，非常简单一看就懂，<code>face = img[100:200, 115:188]</code>，这也只能是个矩形，不过得到轮廓或者利用掩码方式得到一块想要的区域也行</li>
</ul>
<ul>
<li>彩色图的BGR三个通道是可以<strong>分开</strong>单独访问的，<code>b, g, r = cv2.split(img)</code>；也可以<strong>合并</strong>组成图像<code>img = cv2.merge((b, g, r))</code></li>
</ul>
<hr>
<h3 id="4">4. 颜色空间转换</h3>

<ul>
<li><code>img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</code>图像形式转换，教程中用他来转换成HSV颜色模型，改成<code>cv2.COLOR_BGR2HSV</code>就行了</li>
</ul>
<ul>
<li><code>mask = cv2.inRange(hsv, lower_blue, upper_blue)</code>，其实inRange这个函数我感觉不太重要，因为后面有阈值分割，但可能这个是<strong>针对真彩图像</strong>，与阈值分割多是用于灰度图</li>
</ul>
<ul>
<li>然后很重要的一个<code>res = cv2.bitwise_and(frame, frame, mask=mask)</code>，这个位操作是图像只存在0和255也就是二值图像的关键操作，可以在以后的二值图像处理里起到作用，特别是<strong>应用在掩码图的得到</strong></li>
</ul>
<hr>
<h3 id="5">5. 阈值分割</h3>

<ul>
<li>这一段是之后的基础，全都讲起来有点麻烦了，我就不多说。额，先说一句，这个应该是用在<strong>处理灰度图上的</strong></li>
</ul>
<ul>
<li><strong>固定阈值</strong>：<code>ret, th = cv2.threshold(img, 127, 255, cv2.THRESH_BINARY)</code>，第二个参数是设定的阈值，第三个是最大值，最后一个阈值的方式，<a href="https://docs.opencv.org/4.0.0/d7/d1b/group__imgproc__misc.html#gaa9e58d2860d4afa658ef70a9b1115576">种类主要5种</a></li>
</ul>
<ul>
<li><strong>自适应阈值</strong>：<code>th2 = cv2.adaptiveThreshold(img, 255, cv2.ADAPTIVE_THRESH_MEAN_C, cv2.THRESH_BINARY, 11, 4)</code>，不同之处就在第三个参数，小区域阈值的计算方式；最后一个参数：最终阈值等于小区域计算出的阈值再减去此值（光看看不懂，想试试就自己试试）</li>
</ul>
<ul>
<li><p><strong>Otsu阈值</strong>：看代码就知道怎么用了，原理自便</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 固定阈值法</span><br><span class="line">ret1, th1 &#x3D; cv2.threshold(img, 100, 255, cv2.THRESH_BINARY)</span><br><span class="line"></span><br><span class="line"># Otsu阈值法</span><br><span class="line">ret2, th2 &#x3D; cv2.threshold(img, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br><span class="line"></span><br><span class="line"># 先进行高斯滤波，再使用Otsu阈值法</span><br><span class="line">blur &#x3D; cv2.GaussianBlur(img, (5, 5), 0)</span><br><span class="line">ret3, th3 &#x3D; cv2.threshold(blur, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)</span><br></pre></td></tr></table></figure>
</li>
<li><p>光线不均匀的图片就用自适应阈值就完事了</p>
</li>
</ul>
<hr>
<h3 id="6">6. 图形几何变换</h3>

<ul>
<li>其实我觉得这一章是很重要的，因为图像处理应该会有很多时候待处理的目标是需要几何变换特别是立体上的仿射变换</li>
</ul>
<ul>
<li><code>cv2.resize()</code><strong>可以自己定义大小，也可以按比例缩放</strong>，用处会很多，我不知道和下面这个有什么关系，用处大不大，或者说在哪里使用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lower &#x3D; cv2.pyrDown(img)  # 向下采样一级</span><br><span class="line">higher &#x3D; cv2.pyrUp(img)  # 向上采样一级</span><br></pre></td></tr></table></figure>


<ul>
<li><code>cv2.flip(img, 1)</code>第二个参数决定是<strong>镜像、垂直、镜像垂直翻转</strong></li>
</ul>
<ul>
<li><strong>平移图片</strong>，需要用到矩阵，用<strong>仿射变换函数</strong><code>cv2.warpAffine()</code>实现；<strong>旋转</strong>也是，而且用这个函数前，还要加个得到旋转对应的矩阵的函数<code>cv2.getRotationMatrix2D()</code>，你看这还只是2D的</li>
</ul>
<p>$$<br>M = \left[<br> \begin{matrix}<br>   1 &amp; 0 &amp; t_x \newline<br>   0 &amp; 1 &amp; t_y<br>  \end{matrix}<br>  \right]<br>$$</p>
<h4 id="仿射变换"><a href="#仿射变换" class="headerlink" title="仿射变换"></a><strong>仿射变换</strong></h4><ul>
<li><strong>二维的</strong>，懂了吗，基本的图像变换就是二维坐标的变换：从一种二维坐标(x,y)到另一种二维坐标(u,v)的线性变换，你得先得到一个矩阵，那么就可以转换了，矩阵<strong>T(2×3)</strong>就称为仿射变换的变换矩阵</li>
</ul>
<p>$$<br>\begin{matrix}<br>   u=a_1x+b_1y+c_1 \newline<br>   v=a_2x+b_2y+c_2<br>  \end{matrix}<br>$$</p>
<hr>
<p>$$<br>\left[<br> \begin{matrix}<br>   u \newline<br>   v<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   a_1 &amp; b_1  \newline<br>   a_2 &amp; b_2<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y<br>  \end{matrix}<br>  \right]+\left[<br> \begin{matrix}<br>   c_1 \newline<br>   c_2<br>  \end{matrix}<br>  \right]<br>$$</p>
<hr>
<p>$$<br>R=\left[<br> \begin{matrix}<br>   a_1 &amp; b_1  \newline<br>   a_2 &amp; b_2<br>  \end{matrix}<br>  \right], t=\left[<br> \begin{matrix}<br>   c_1 \newline<br>   c_2<br>  \end{matrix}<br>  \right],T=\left[<br> \begin{matrix}<br>   R &amp; t<br>  \end{matrix}<br>  \right]<br>$$</p>
<hr>
<ul>
<li>然后几行代码看懂，现根据三个点和对应的三个点得到变换矩阵，然后直接转整个图像</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 变换前的三个点</span><br><span class="line">pts1 &#x3D; np.float32([[50, 65], [150, 65], [210, 210]])</span><br><span class="line"># 变换后的三个点</span><br><span class="line">pts2 &#x3D; np.float32([[50, 100], [150, 65], [100, 250]])</span><br><span class="line"></span><br><span class="line"># 生成变换矩阵</span><br><span class="line">M &#x3D; cv2.getAffineTransform(pts1, pts2)</span><br><span class="line">dst &#x3D; cv2.warpAffine(img, M, (cols, rows))</span><br></pre></td></tr></table></figure>

<h4 id="透视变换"><a href="#透视变换" class="headerlink" title="透视变换"></a><strong>透视变换</strong></h4><ul>
<li><strong>三维的</strong>，就是<strong>立体上</strong>如何把一个目标看得顺眼一点，一个身份证你斜着拍的，那我想让他能像平着拍的一样舒服，那就用这个方法</li>
</ul>
<p>$$<br>\begin{matrix}<br>   X=a_1 x + b_1 y + c_1 \newline<br>   Y=a_2 x + b_2 y + c_2  \newline<br>   Z=a_3 x + b_3 y + c_3<br>  \end{matrix}<br>$$</p>
<hr>
<p>$$<br>\left[<br> \begin{matrix}<br>   X \newline<br>   Y \newline<br>   Z<br>  \end{matrix}<br>  \right]  = \left[<br> \begin{matrix}<br>   a_1 &amp; b_1 &amp; c_1  \newline<br>   a_2 &amp; b_2 &amp; c_2  \newline<br>   a_3 &amp; b_3 &amp; c_3<br>  \end{matrix}<br>  \right] \left[<br> \begin{matrix}<br>   x \newline<br>   y \newline<br>   1<br>  \end{matrix}<br>  \right]<br>$$</p>
<ul>
<li>OpenCV中首先根据变换前后的四个点用<code>cv2.getPerspectiveTransform()</code>生成3×3的变换矩阵，然后再用<code>cv2.warpPerspective()</code>进行透视变换</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 原图中卡片的四个角点</span><br><span class="line">pts1 &#x3D; np.float32([[148, 80], [437, 114], [94, 247], [423, 288]])</span><br><span class="line"># 变换后分别在左上、右上、左下、右下四个点</span><br><span class="line">pts2 &#x3D; np.float32([[0, 0], [320, 0], [0, 178], [320, 178]])</span><br><span class="line"></span><br><span class="line"># 生成透视变换矩阵</span><br><span class="line">M &#x3D; cv2.getPerspectiveTransform(pts1, pts2)</span><br><span class="line"># 进行透视变换，参数3是目标图像大小</span><br><span class="line">dst &#x3D; cv2.warpPerspective(img, M, (320, 178))</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">变换</th>
<th align="center">矩阵</th>
<th align="center">自由度</th>
<th align="center">保持性质</th>
</tr>
</thead>
<tbody><tr>
<td align="center">平移</td>
<td align="center">[I, t]（2×3）</td>
<td align="center">2</td>
<td align="center">方向/长度/夹角/平行性/直线性</td>
</tr>
<tr>
<td align="center">刚体</td>
<td align="center">[R, t]（2×3）</td>
<td align="center">3</td>
<td align="center">长度/夹角/平行性/直线性</td>
</tr>
<tr>
<td align="center">相似</td>
<td align="center">[sR, t]（2×3）</td>
<td align="center">4</td>
<td align="center">夹角/平行性/直线性</td>
</tr>
<tr>
<td align="center">仿射</td>
<td align="center">[T]（2×3）</td>
<td align="center">6</td>
<td align="center">平行性/直线性</td>
</tr>
<tr>
<td align="center">透视</td>
<td align="center">[T]（3×3）</td>
<td align="center">8</td>
<td align="center">直线性</td>
</tr>
</tbody></table>
<hr>
<h3 id="7">7. 绘图功能</h3>

<ul>
<li><p>感觉画图功能不太用得到，不过也是用起来很方便，绘制形状的函数有一些共同的参数</p>
<ul>
<li>color：绘制的颜色,是彩色图就估计是BGR，就输一个三维元组ok；灰度图就一个255以内的数</li>
<li>thickness：线宽，默认为1；<strong>对于矩形/圆之类的封闭形状而言，传入-1表示填充形状</strong></li>
<li>建议画什么线型都加一个<code>lineType=cv2.LINE_AA</code>比较好看</li>
</ul>
</li>
<li><p><code>img = np.zeros((512, 512, 3), np.uint8)</code>可以直接用这样一句话来<strong>创建一个纯色图</strong></p>
</li>
</ul>
<ul>
<li><code>cv2.line(img, (0, 0), (512, 512), (255, 0, 0), 5)</code>，<strong>起点</strong>、<strong>终点</strong></li>
</ul>
<ul>
<li><code>cv2.rectangle(img, (384, 0), (510, 128), (0, 255, 0), 3)</code>，<strong>左上</strong>、<strong>右下</strong></li>
</ul>
<ul>
<li><code>cv2.circle(img, (447, 63), 63, (0, 0, 255), -1)</code>，<strong>圆心</strong>、<strong>半径</strong></li>
</ul>
<ul>
<li><code>cv2.ellipse(img, (256, 256), (100, 50), 0, 0, 180, (255, 0, 0), -1)</code>，<strong>椭圆中心</strong>、<strong>x/y轴长度</strong>、<strong>旋转角度</strong>、<strong>起始角度</strong>、<strong>结束角度</strong>，具体自己试试</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 使用cv2.polylines()画多条直线</span><br><span class="line">line1 &#x3D; np.array([[100, 20],  [300, 20]], np.int32).reshape((-1, 1, 2))</span><br><span class="line">line2 &#x3D; np.array([[100, 60],  [300, 60]], np.int32).reshape((-1, 1, 2))</span><br><span class="line">line3 &#x3D; np.array([[100, 100],  [300, 100]], np.int32).reshape((-1, 1, 2))</span><br><span class="line">cv2.polylines(img, [line1, line2, line3], True, (0, 255, 255))</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>添加文字</strong>：<code>cv2.putText(img, &#39;ex2tron&#39;, (10, 500), font,4, (255, 255, 255), 2, lineType=cv2.LINE_AA)</code></li>
</ul>
<hr>
<h3 id="8">8. 图像混合</h3>



<p>👴乏了，找时间再写吧</p>
</font>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-03-29T18:45:22.000Z">2020-03-30</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 824 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/03/30/opencv3/">python 之 opencv-摄像头采集和视频播放</a>
            
        </h1>
        <div class="content">
            <font face='Times New Roman'>

<h2 id="打开摄像头"><a href="#打开摄像头" class="headerlink" title="打开摄像头"></a>打开摄像头</h2><hr>
<p>要使用摄像头，需要使用<code>cv2.VideoCapture(0)</code>创建VideoCapture对象，参数0指的是摄像头的编号，如果你电脑上有两个摄像头的话，访问第2个摄像头就可以传入1，依此类推。</p>
<h4 id="capture-read"><a href="#capture-read" class="headerlink" title="capture.read"></a><strong>capture.read</strong></h4><p>函数返回的第1个参数ret(return value缩写)是一个布尔值，表示当前这一帧是否获取正确</p>
<h4 id="cv2-cvtColor"><a href="#cv2-cvtColor" class="headerlink" title="cv2.cvtColor"></a><strong>cv2.cvtColor</strong></h4><p>用来转换颜色，这里将彩色图转成灰度图</p>
<h4 id="cap-get-propId-、cap-set-propId-value"><a href="#cap-get-propId-、cap-set-propId-value" class="headerlink" title="cap.get(propId)、cap.set(propId,value)"></a><strong>cap.get(propId)</strong>、<strong>cap.set(propId,value)</strong></h4><p>通过<code>cap.get(propId)</code>可以获取摄像头的一些属性，比如捕获的分辨率，亮度和对比度等。propId是从0~18的数字，代表不同的属性，完整的属性列表可以参考：<a href="https://docs.opencv.org/4.0.0/d4/d15/group__videoio__flags__base.html#gaeb8dd9c89c10a5c63c139bf7c4f5704d">VideoCaptureProperties</a>。也可以使用<code>cap.set(propId,value)</code>来修改属性值</p>
<blockquote>
<p>经验之谈：某些摄像头设定分辨率等参数时会无效，因为它有固定的分辨率大小支持，一般可在摄像头的资料页中找到。</p>
</blockquote>
<h2 id="播放本地视频"><a href="#播放本地视频" class="headerlink" title="播放本地视频"></a>播放本地视频</h2><hr>
<p>跟打开摄像头一样，如果把摄像头的编号换成视频的路径就可以播放本地视频了。回想一下<code>cv2.waitKey()</code>，它的参数表示暂停时间，所以这个值越大，视频播放速度越慢，反之，播放速度越快，通常设置为25或30。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 播放本地视频</span></span><br><span class="line">capture = cv2.VideoCapture(<span class="string">'demo_video.mp4'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(capture.isOpened()):</span><br><span class="line">    ret, frame = capture.read()</span><br><span class="line">    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line">    cv2.imshow(<span class="string">'frame'</span>, gray)</span><br><span class="line">    <span class="keyword">if</span> cv2.waitKey(<span class="number">30</span>) == ord(<span class="string">'q'</span>):</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<h2 id="录制视频"><a href="#录制视频" class="headerlink" title="录制视频"></a>录制视频</h2><hr>
<p>之前我们保存图片用的是<code>cv2.imwrite()</code>，要保存视频，我们需要创建一个<code>VideoWriter</code>的对象，需要给它传入四个参数：</p>
<ul>
<li>输出的文件名，如’output.avi’</li>
<li>编码方式<a href="https://baike.baidu.com/item/fourcc/6168470?fr=aladdin">FourCC</a>码</li>
<li>帧率<a href="https://baike.baidu.com/item/FPS/3227416">FPS</a></li>
<li>要保存的分辨率大小</li>
</ul>
<p>FourCC是用来指定视频编码方式的四字节码，所有的编码可参考<a href="http://www.fourcc.org/codecs.php">Video Codecs</a>。如MJPG编码可以这样写： <code>cv2.VideoWriter_fourcc(*&#39;MJPG&#39;)</code>或<code>cv2.VideoWriter_fourcc(&#39;M&#39;,&#39;J&#39;,&#39;P&#39;,&#39;G&#39;)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">capture = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义编码方式并创建VideoWriter对象</span></span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(*<span class="string">'MJPG'</span>)</span><br><span class="line">outfile = cv2.VideoWriter(<span class="string">'output.avi'</span>, fourcc, <span class="number">25.</span>, (<span class="number">640</span>, <span class="number">480</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(capture.isOpened()):</span><br><span class="line">    ret, frame = capture.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ret:</span><br><span class="line">        outfile.write(frame)  <span class="comment"># 写入文件</span></span><br><span class="line">        cv2.imshow(<span class="string">'frame'</span>, frame)</span><br><span class="line">        <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) == ord(<span class="string">'q'</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<p><a href="https://blog.csdn.net/u011436429/article/details/80604590">OpenCV VideoCapture.get()参数中文详解，不太准确供参考</a></p>
<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><hr>
<ul>
<li>实现一个可以拖动滑块播放视频的功能。（提示：需要用到 <code>cv2.CAP_PROP_FRAME_COUNT</code>和<code>cv2.CAP_PROP_POS_FRAMES</code>两个属性）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">changetime</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> capture.set(cv2.CAP_PROP_POS_FRAMES, x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 播放本地视频</span></span><br><span class="line">capture = cv2.VideoCapture(<span class="string">'demo_video.mp4'</span>)</span><br><span class="line"><span class="comment">#获取视频帧长度</span></span><br><span class="line">frame_count = capture.get(cv2.CAP_PROP_FRAME_COUNT)</span><br><span class="line"><span class="comment">#创建一个窗口</span></span><br><span class="line">cv2.namedWindow(<span class="string">'video'</span>)</span><br><span class="line"><span class="comment"># 创建视频滑动条</span></span><br><span class="line">cv2.createTrackbar(<span class="string">'video'</span>, <span class="string">'video'</span>, <span class="number">0</span>, int(frame_count), changetime)</span><br><span class="line"></span><br><span class="line">height = capture.get(cv2.CAP_PROP_FRAME_HEIGHT)</span><br><span class="line">width = capture.get(cv2.CAP_PROP_FRAME_WIDTH)</span><br><span class="line">print(capture.set(cv2.CAP_PROP_FRAME_HEIGHT, height * <span class="number">2</span>))</span><br><span class="line">print(capture.set(cv2.CAP_PROP_FRAME_WIDTH, width * <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(capture.isOpened()):</span><br><span class="line">    ret, frame = capture.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ret == <span class="literal">True</span>:</span><br><span class="line">        cv2.setTrackbarPos(<span class="string">'video'</span>,<span class="string">'video'</span>,int(capture.get(cv2.CAP_PROP_POS_FRAMES)))</span><br><span class="line">        cv2.imshow(<span class="string">'video'</span>, frame)</span><br><span class="line">        <span class="keyword">if</span> cv2.waitKey(<span class="number">30</span>) == ord(<span class="string">'q'</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

</font>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-03-29T18:27:34.000Z">2020-03-30</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 452 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/03/30/opencv2/">python 之 opencv-matplotlib显示图片</a>
            
        </h1>
        <div class="content">
            <font face='Times New Roman'>

<h2 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h2><hr>
<p>Matplotlib是Python的一个很常用的绘图库，有兴趣的可以去<a href="www.matplotlib.org/">官网</a>学习更多内容。</p>
<h3 id="显示灰度图"><a href="#显示灰度图" class="headerlink" title="显示灰度图"></a>显示灰度图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 灰度图显示，cmap(color map)设置为gray</span></span><br><span class="line">plt.imshow(img, cmap=<span class="string">'gray'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<p><img src="http://blog.codec.wang/cv2_matplotlib_show_gray_image.jpg" alt=""></p>
<p><a href="https://blog.csdn.net/ab_1_2_3_4_5_6_7_8_9/article/details/89306797">plt.show()和plt.imshow()的区别</a></p>
<p><a href="https://blog.csdn.net/qq_30934313/article/details/85249831"><code>plt.imshow</code> 的<code>cmap</code>颜色参数选择</a></p>
<hr>
<h3 id="显示彩色图"><a href="#显示彩色图" class="headerlink" title="显示彩色图"></a>显示彩色图</h3><p><strong>OpenCV中的图像是以BGR的通道顺序存储的</strong>，但Matplotlib是以RGB模式显示的，所以直接在Matplotlib中显示OpenCV图像会出现问题，因此需要转换一下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line">img2 = img[:, :, ::<span class="number">-1</span>]</span><br><span class="line"><span class="comment"># 或使用</span></span><br><span class="line"><span class="comment"># img2 = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示不正确的图</span></span><br><span class="line">plt.subplot(<span class="number">121</span>),plt.imshow(img) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示正确的图</span></span><br><span class="line">plt.subplot(<span class="number">122</span>)</span><br><span class="line">plt.xticks([]), plt.yticks([]) <span class="comment"># 隐藏x和y轴</span></span><br><span class="line">plt.imshow(img2)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>img[:,:,0]</code>表示图片的蓝色通道，<code>img[:,:,::-1]</code>就表示BGR翻转，变成RGB，说明一下：</p>
</blockquote>
<p>熟悉Python的童鞋应该知道，对一个字符串s翻转可以这样写：<code>s[::-1]</code>，’abc’变成’cba’，-1表示逆序。图片是二维的，所以完整地复制一副图像就是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img2 = img[:,:] <span class="comment"># 写全就是：img2 = img[0:height,0:width]</span></span><br></pre></td></tr></table></figure>

<p>而图片是有三个通道，相当于一个长度为3的字符串，所以通道翻转与图片复制组合起来便是<code>img[:,:,::-1]</code>。</p>
<p>结果如下：</p>
<p><img src="http://blog.codec.wang/cv2_matplotlib_show_color_image.jpg" alt=""></p>
<h3 id="加载和保存图片"><a href="#加载和保存图片" class="headerlink" title="加载和保存图片"></a>加载和保存图片</h3><p>不使用OpenCV，Matplotlib也可以加载和保存图片：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.image <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = plt.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line">plt.imshow(img)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存图片，需放在show()函数之前</span></span><br><span class="line">plt.savefig(<span class="string">'lena2.jpg'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


</font>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-03-29T10:08:03.000Z">2020-03-29</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 877 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/03/29/opencv1/">python 之 opencv-简单读取操作</a>
            
        </h1>
        <div class="content">
            <font face='Times New Roman'>

<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>这几天看了很多关于图像处理的知识，知道神经网络是怎么回事，深度学习是什么东西，机器学习和他们有什么联系，又看了python语言下如何进行图像处理。我认为在接受更高层次的处理手段和算法设计前，应该打好基础，python的图像处理，学好PIL库和opencv库，我在github上找了个opencv的教程，接下来就是对opencv重点的一些备注</p>
<hr>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><hr>
<blockquote>
<p><code>pip install opencv-python</code></p>
</blockquote>
<ul>
<li>安装测试</li>
</ul>
<blockquote>
<p><code>python --version</code><br><code>import cv2</code>&emsp; or&emsp; <code>print(cv2.__version__)  # &#39;3.4.1&#39;</code></p>
</blockquote>
<hr>
<h3 id="使用清华镜像在python中pip安装"><a href="#使用清华镜像在python中pip安装" class="headerlink" title="使用清华镜像在python中pip安装"></a><a href="https://blog.csdn.net/weixin_34130389/article/details/94510529">使用清华镜像在python中pip安装</a></h3><hr>
<ul>
<li>临时使用：</li>
</ul>
<p>可以在使用pip的时候加参数-i <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a></p>
<p>例如：pip install -i <a href="https://pypi.tuna.tsinghua.edu.cn/simple">https://pypi.tuna.tsinghua.edu.cn/simple</a> gevent，这样就会从清华这边的镜像去安装gevent库。</p>
<hr>
<h3 id="opencv入门"><a href="#opencv入门" class="headerlink" title="opencv入门"></a>opencv入门</h3><hr>
<ul>
<li>OpenCV中彩色图是以<strong>B-G-R</strong>通道顺序存储的，灰度图只有一个通道</li>
<li>图像坐标的起始点是在<strong>左上角</strong>，所以行对应的是y，列对应的是x</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始计时</span></span><br><span class="line">start = cv2.getTickCount()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读入一张图片</span></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止计时</span></span><br><span class="line">end = cv2.getTickCount()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单位：s</span></span><br><span class="line">print((end - start) / cv2.getTickFrequency())</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="cv2-imread"><a href="#cv2-imread" class="headerlink" title="cv2.imread"></a><strong>cv2.imread</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载灰度图</span></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>参数1：图片的文件名</p>
<ul>
<li>如果图片放在当前文件夹下，直接写文件名就行了，如’lena.jpg’</li>
<li>否则需要给出绝对路径，如’D:\OpenCVSamples\lena.jpg’</li>
</ul>
</li>
<li><p>参数2：读入方式，省略即采用默认值</p>
<ul>
<li><code>cv2.IMREAD_COLOR</code>：彩色图，默认值(1)</li>
<li><code>cv2.IMREAD_GRAYSCALE</code>：灰度图(0)</li>
<li><code>cv2.IMREAD_UNCHANGED</code>：包含透明通道的彩色图(-1)</li>
</ul>
</li>
</ul>
<blockquote>
<p>经验之谈：路径中不能有中文噢，并且没有加载成功的话是不会报错的，<code>print(img)</code>的结果为None，后面处理才会报错，算是个小坑。</p>
</blockquote>
<hr>
<h4 id="cv2-imshow、cv2-waitKey"><a href="#cv2-imshow、cv2-waitKey" class="headerlink" title="cv2.imshow、cv2.waitKey"></a><strong>cv2.imshow</strong>、<strong>cv2.waitKey</strong></h4><hr>
<p>使用<code>cv2.imshow()</code>显示图片，窗口会自适应图片的大小：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv2.imshow(<span class="string">'lena'</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>参数1是窗口的名字，参数2是要显示的图片。不同窗口之间用窗口名区分，所以窗口名相同就表示是同一个窗口</p>
<hr>
<p><code>cv2.waitKey()</code>是让程序暂停的意思，参数是等待时间（毫秒ms）。时间一到，会继续执行接下来的程序，传入0的话表示一直等待。等待期间也可以获取用户的按键输入：<code>k = cv2.waitKey(0)</code></p>
<hr>
<h4 id="cv2-namedWindow"><a href="#cv2-namedWindow" class="headerlink" title="cv2.namedWindow"></a><strong>cv2.namedWindow</strong></h4><hr>
<p>我们也可以先用<code>cv2.namedWindow()</code>创建一个窗口，之后再显示图片：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先定义窗口，后显示图片</span></span><br><span class="line">cv2.namedWindow(<span class="string">'lena2'</span>, cv2.WINDOW_NORMAL)</span><br><span class="line">cv2.imshow(<span class="string">'lena2'</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>参数1依旧是窗口的名字，参数2默认是<code>cv2.WINDOW_AUTOSIZE</code>，表示窗口大小自适应图片，也可以设置为<code>cv2.WINDOW_NORMAL</code>，表示窗口大小可调整。图片比较大的时候，可以考虑用后者。</p>
<hr>
<h4 id="cv2-imwrite"><a href="#cv2-imwrite" class="headerlink" title="cv2.imwrite"></a><strong>cv2.imwrite</strong></h4><hr>
<p>使用<code>cv2.imwrite()</code>保存图片，参数1是包含后缀名的文件名：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.imwrite(<span class="string">'lena_gray.jpg'</span>, img)</span><br></pre></td></tr></table></figure>


<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><ul>
<li>打开lena.jpg并显示，s如果按下’s’，就保存图片为’lena_save.bmp’，否则就结束程序</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'lena.jpg'</span>)</span><br><span class="line">cv2.imshow(<span class="string">'lena'</span>, img)</span><br><span class="line"></span><br><span class="line">k = cv2.waitKey(<span class="number">0</span>)</span><br><span class="line"><span class="comment"># ord()用来获取某个字符的编码</span></span><br><span class="line"><span class="keyword">if</span> k == ord(<span class="string">'s'</span>):</span><br><span class="line">    cv2.imwrite(<span class="string">'lena_save.bmp'</span>, img)</span><br></pre></td></tr></table></figure>

</font>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-03-27T14:03:57.000Z">2020-03-27</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 245 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/03/27/PYTHON-%E4%B9%8B-%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">pillow初识、format格式化、绝对相对路径说明</a>
            
        </h1>
        <div class="content">
            <font face="Times New Roman">

<blockquote>
<p>python -m -pip install –upgrade pip   #升级python的pip</p>
</blockquote>
<blockquote>
<p>pip install pillow   #安装pillow库</p>
</blockquote>
<blockquote>
<p>pip install django-simple-captcha    #安装captcha库</p>
</blockquote>
<blockquote>
<p>pip install opencv-python   #安装opencv库</p>
</blockquote>
<blockquote>
<p>pip install matplotlib    #安装matplotlib库</p>
</blockquote>
<hr>
<p><a href="https://www.php.cn/python-tutorials-372980.html">pillow的小程度基本入门</a></p>
<ul>
<li>可以对图像进行简单的读取、生成、裁剪、缩放、复制、翻转、旋转、粘贴、拉伸</li>
<li>图像的模糊、边缘增强、锐利、平滑等常见操作</li>
<li>在图像中加入文本，将图片变色</li>
</ul>
<hr>
<h3 id="文件绝对路径和相对路径的表示形式不同"><a href="#文件绝对路径和相对路径的表示形式不同" class="headerlink" title="文件绝对路径和相对路径的表示形式不同"></a>文件绝对路径和相对路径的表示形式不同</h3><ol>
<li>windows系统中绝对路径用<code>\</code>展开，而在其他系统中会出现用<code>/</code>的展开</li>
<li>相对路径中则使用<code>/</code>，比如返回上一级文件夹<code>../</code>，当前文件夹前不需要加斜杠，前往下一级文件夹的某文件则类似于<code>/xx/xx.c</code></li>
</ol>
<h3 id="python语法：格式化输出之format用法"><a href="#python语法：格式化输出之format用法" class="headerlink" title="python语法：格式化输出之format用法"></a><a href="https://www.cnblogs.com/lovejh/p/9201219.html">python语法：格式化输出之format用法</a></h3></font>
        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-03-18T15:18:19.000Z">2020-03-18</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Python/">Python</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 725 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/03/18/python-3/">python学习-3</a>
            
        </h1>
        <div class="content">
            <ul>
<li><p><a href="https://www.runoob.com/python/python-func-enumerate.html"><kbd><strong>enumerate()</strong></kbd>函数</a>:用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标，一般用在<kbd>for</kbd>循环当中</p>
</li>
<li><p><a href="https://www.runoob.com/python3/python3-func-sorted.html"><kbd><strong>sorted()</strong></kbd>函数</a>:对所有可迭代的对象进行排序操作（链接内含<kbd>sort()</kbd>函数与<kbd>sorted()</kbd>函数区别）</p>
</li>
<li><p><a href="https://www.runoob.com/python3/python3-string-lower.html"><kbd><strong>lower()</strong></kbd>函数</a>:将字符串中所有字母进行小写操作，（不能对其他类型数据进行操作，会报错）</p>
</li>
<li><p><a href="https://www.runoob.com/python3/python3-att-dictionary-items.html"><kbd><strong>items()</strong></kbd>函数</a>:以列表返回可遍历的(键，值)元组数组，(<kbd>xxx.items()</kbd>)</p>
</li>
</ul>
<hr>
<font face="Times New Roman">

<blockquote>
<p><strong>lambda</strong> : 匿名函数</p>
</blockquote>
<blockquote>
<p><strong>装饰器（Decorator）</strong>是通过python的@语法实现的</p>
</blockquote>
<blockquote>
<p><strong>OOP</strong>（Object Oriented Programming）：面向对象的编程，是一种程序设计思想</p>
</blockquote>
<ul>
<li>数据封装、继承和多态只是面向对象程序设计中最基础的3个概念</li>
</ul>
<blockquote>
<p>Python允许使用<strong>多重继承</strong>，因此，<strong>MixIn</strong> 就是一种常见的设计</p>
</blockquote>
<blockquote>
<p>如果想将一个类用作for … in循环，类似list或tuple，那么必须有一个<code>__iter__()</code>方法来返回一个迭代对象，但是要注意他就是一个类，当然经过实验发现你通过类建立实例也可以等价的做for循环，注意<code>__iter__</code>要配合<code>__next__</code>使用</p>
</blockquote>
<blockquote>
<p>我们自己定义的类表现得和Python自带的list、tuple、dict没什么区别，这完全归功于动态语言的“鸭子类型”，不需要强制继承某个接口。</p>
</blockquote>
<blockquote>
<p><code>__call__()</code>还可以定义参数。对实例进行直接调用就好比对一个函数进行调用一样，所以你完全可以把对象看成函数，把函数看成对象，因为这两者之间本来就没啥根本的区别</p>
<p>通过<code>callable()</code>函数，我们就可以判断一个对象是否是“可调用”对象。</p>
</blockquote>
<blockquote>
<p>Python的class允许定义许多定制方法，可以让我们非常方便地生成特定的类。</p>
<p>本节介绍的是最常用的几个定制方法，还有很多可定制的方法，请参考<a href="http://docs.python.org/3/reference/datamodel.html#special-method-names">Python的官方文档</a>。</p>
</blockquote>
<hr>
<p>借用一个例子深刻理解<code>__str__</code>、<code>__repr__</code>、<code>__getattr__</code>、<code>__call__</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">输出个性化URL:</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chain</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, path=<span class="string">''</span>)</span>:</span></span><br><span class="line">       self.__path = path</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, path)</span>:</span></span><br><span class="line">       <span class="keyword">return</span> Chain(<span class="string">'%s/%s'</span> % (self.__path, path))</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, path)</span>:</span></span><br><span class="line">       <span class="keyword">return</span> Chain(<span class="string">'%s/%s'</span> % (self.__path, path))</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">       <span class="keyword">return</span> self.__path</span><br><span class="line"></span><br><span class="line">   __repr__ = __str__</span><br><span class="line"></span><br><span class="line">   print(Chain().users(<span class="string">'michael'</span>).repos) <span class="comment"># /users/michael/repos</span></span><br></pre></td></tr></table></figure>



<hr>
<p><a href="https://segmentfault.com/a/1190000017327003">python的枚举类型</a></p>
<blockquote>
<p>正常情况下，我们都用<code>class Xxx...</code>来定义类，但是，<code>type()</code>函数也允许我们动态创建出类来</p>
</blockquote>
</font>


        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-03-13T10:44:57.000Z">2020-03-13</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/Python/">Python</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 381 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/03/13/python%E5%AD%A6%E4%B9%A0-2/">python学习-2</a>
            
        </h1>
        <div class="content">
            <p><a href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017261630425888">函数的各种参数类型，廖雪峰的博客</a></p>
<p>今天主要学习了函数，函数参量的种类和一些注意事项</p>
<ul>
<li><p><code>From xx import xxx</code> 可以从xx.py文件中引用函数xxx(…)</p>
</li>
<li><p><code>isinstance(object, classinfo)</code> object-实例对象、classinfo-可以是直接或间接类名、基本类型或者由它们组成的元组；相比于<kbd>type()</kbd>，建议使用<kbd>isinstance()</kbd></p>
</li>
<li><p><code>x**n</code> 变量的高次幂的表示形式</p>
</li>
<li><p><code>def f2(a, b, c=0, *, d, **kw):</code> 函数的参数组合，注意顺序；此外，对于任意函数，都可以通过类似<kbd>func(<em>args, *</em>kw)</kbd>的形式调用它，无论它的参数是如何定义</p>
</li>
</ul>
<hr>
<ul>
<li>递归函数，思路很重要，自己的理解能力还是太弱了，加强锻炼吧！</li>
</ul>
<blockquote>
<p>递归函数的经典问题：汉诺塔；例程函数如下</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">def hanoi(n,a,b,c):</span><br><span class="line">    # 当n为1时 (递归基础)</span><br><span class="line">    if n &#x3D;&#x3D; 1:</span><br><span class="line">        print(a, &#39;--&gt;&#39;, c) # 将A柱最底层的圆盘移动到C柱</span><br><span class="line">    # 当n大于1时</span><br><span class="line">    else:</span><br><span class="line">        hanoi(n-1, a, c, b) # 借助C柱，将n-1个圆盘从A柱移动到B柱</span><br><span class="line">        print(a, &#39;--&gt;&#39;, c) # 将A柱最底层的圆盘移动到C柱</span><br><span class="line">        hanoi(n-1, b, a, c) # 借助A柱，将n-1个圆盘从B柱移动到C柱</span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li><a href="https://www.runoob.com/python/python-func-range.html">range()函数用法</a> <code>range(start, stop[, step])</code> 基本用于for循环,生成列表或元组的一般表达形式<kbd><strong>list(range(x,x,x))</strong></kbd>或<kbd><strong>tuple(range(x,x,x))</strong></kbd></li>
<li></li>
</ul>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/tags/python/page/0/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/tags/python/page/2/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link is-current" href="/tags/python/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/tags/python/page/2/">2</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="is-rounded" src="/images/2.jpeg" alt="张砚驰">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        张砚驰
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        电子测控专业
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>湖北 武汉</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            23
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            7
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            17
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/hit-zyc" target="_blank" rel="noopener">
                Follow</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="Github" href="https://github.com/hit-zyc">
                
                <i class="fab fa-github"></i>
                
            </a>
            
            <a class="level-item button is-white is-marginless" target="_blank" rel="noopener"
                title="RSS" href="/">
                
                <i class="fas fa-rss"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/hit-zyc" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">My Github</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.collinsdictionary.com/zh/" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Colins</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.collinsdictionary.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.ieltscat.com/ " target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Ieltscat</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.ieltscat.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Ielts/">
            <span class="level-start">
                <span class="level-item">Ielts</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Image-Processing/">
            <span class="level-start">
                <span class="level-item">Image Processing</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">9</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Magnetic-field-specialty/">
            <span class="level-start">
                <span class="level-item">Magnetic field specialty</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Python/">
            <span class="level-start">
                <span class="level-item">Python</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/ROBOCON2020/">
            <span class="level-start">
                <span class="level-item">ROBOCON2020</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/ZYC/">
            <span class="level-start">
                <span class="level-item">ZYC</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/hexo/">
            <span class="level-start">
                <span class="level-item">hexo</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/CNN/" style="font-size: 10px;">CNN</a> <a href="/tags/DT35/" style="font-size: 10px;">DT35</a> <a href="/tags/NNS/" style="font-size: 12px;">NNS</a> <a href="/tags/PIL/" style="font-size: 10px;">PIL</a> <a href="/tags/ROBOCON2020/" style="font-size: 10px;">ROBOCON2020</a> <a href="/tags/adams/" style="font-size: 10px;">adams</a> <a href="/tags/hexo/" style="font-size: 12px;">hexo</a> <a href="/tags/ielts/" style="font-size: 16px;">ielts</a> <a href="/tags/jupyter/" style="font-size: 10px;">jupyter</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/maxwell/" style="font-size: 10px;">maxwell</a> <a href="/tags/opencv/" style="font-size: 16px;">opencv</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/pytorch/" style="font-size: 14px;">pytorch</a> <a href="/tags/record/" style="font-size: 18px;">record</a> <a href="/tags/robocon2020/" style="font-size: 10px;">robocon2020</a> <a href="/tags/zyc/" style="font-size: 10px;">zyc</a>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-08T11:06:49.000Z">2020-04-08</time></div>
                    <a href="/2020/04/08/pytorch%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3/" class="title has-link-black-ter is-size-6 has-text-weight-normal">pytorch深入了解</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-07T05:46:09.000Z">2020-04-07</time></div>
                    <a href="/2020/04/07/pytorch%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/" class="title has-link-black-ter is-size-6 has-text-weight-normal">pytorch使用说明</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-04T09:20:19.000Z">2020-04-04</time></div>
                    <a href="/2020/04/04/Ielts-4/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Ielts小班课学习-4</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Ielts/">Ielts</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-03T06:19:15.000Z">2020-04-03</time></div>
                    <a href="/2020/04/03/pytorch%E5%88%9D%E8%AF%86/" class="title has-link-black-ter is-size-6 has-text-weight-normal">pytorch、jupyter初识</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-03T05:06:41.000Z">2020-04-03</time></div>
                    <a href="/2020/04/03/opencv-4/" class="title has-link-black-ter is-size-6 has-text-weight-normal">python 之 opencv 阶段总结篇</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/04/">
                <span class="level-start">
                    <span class="level-item">April 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">March 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CNN/">
                        <span class="tag">CNN</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DT35/">
                        <span class="tag">DT35</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/NNS/">
                        <span class="tag">NNS</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PIL/">
                        <span class="tag">PIL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ROBOCON2020/">
                        <span class="tag">ROBOCON2020</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/adams/">
                        <span class="tag">adams</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ielts/">
                        <span class="tag">ielts</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jupyter/">
                        <span class="tag">jupyter</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/markdown/">
                        <span class="tag">markdown</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/maxwell/">
                        <span class="tag">maxwell</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/opencv/">
                        <span class="tag">opencv</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python/">
                        <span class="tag">python</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/pytorch/">
                        <span class="tag">pytorch</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/record/">
                        <span class="tag">record</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/robocon2020/">
                        <span class="tag">robocon2020</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/zyc/">
                        <span class="tag">zyc</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-08T11:06:49.000Z">2020-04-08</time></div>
                    <a href="/2020/04/08/pytorch%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3/" class="title has-link-black-ter is-size-6 has-text-weight-normal">pytorch深入了解</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-07T05:46:09.000Z">2020-04-07</time></div>
                    <a href="/2020/04/07/pytorch%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E/" class="title has-link-black-ter is-size-6 has-text-weight-normal">pytorch使用说明</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-04T09:20:19.000Z">2020-04-04</time></div>
                    <a href="/2020/04/04/Ielts-4/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Ielts小班课学习-4</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Ielts/">Ielts</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-03T06:19:15.000Z">2020-04-03</time></div>
                    <a href="/2020/04/03/pytorch%E5%88%9D%E8%AF%86/" class="title has-link-black-ter is-size-6 has-text-weight-normal">pytorch、jupyter初识</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-04-03T05:06:41.000Z">2020-04-03</time></div>
                    <a href="/2020/04/03/opencv-4/" class="title has-link-black-ter is-size-6 has-text-weight-normal">python 之 opencv 阶段总结篇</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Image-Processing/">Image Processing</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/04/">
                <span class="level-start">
                    <span class="level-item">April 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">March 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/CNN/">
                        <span class="tag">CNN</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/DT35/">
                        <span class="tag">DT35</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/NNS/">
                        <span class="tag">NNS</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/PIL/">
                        <span class="tag">PIL</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ROBOCON2020/">
                        <span class="tag">ROBOCON2020</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/adams/">
                        <span class="tag">adams</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/ielts/">
                        <span class="tag">ielts</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/jupyter/">
                        <span class="tag">jupyter</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/markdown/">
                        <span class="tag">markdown</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/maxwell/">
                        <span class="tag">maxwell</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/opencv/">
                        <span class="tag">opencv</span>
                        <span class="tag is-grey">4</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/python/">
                        <span class="tag">python</span>
                        <span class="tag is-grey">11</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/pytorch/">
                        <span class="tag">pytorch</span>
                        <span class="tag is-grey">3</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/record/">
                        <span class="tag">record</span>
                        <span class="tag is-grey">9</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/robocon2020/">
                        <span class="tag">robocon2020</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/zyc/">
                        <span class="tag">zyc</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="Wdnmd" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 张砚驰&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                Visited by <span id="busuanzi_value_site_uv">0</span> users
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'https://hit-zyc.github.io',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>














<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>